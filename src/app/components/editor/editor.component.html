<div id="custom-toolbar">
    <span class="go-back">
        <button (click)="onBackArrowClick(focusMode)">
            <mat-icon>keyboard_arrow_left</mat-icon>
        </button>
    </span>
    <span class="options" [ngStyle]="toolbarHidden ? {visibility: 'hidden'} : {}">
        <button class="ql-bold"></button>
        <button class="ql-italic"></button>
        <button class="ql-underline"></button>
        <button class="ql-blockquote"></button>
        <button class="ql-list" value="ordered"></button>
        <button class="ql-list" value="bullet"></button>
        <button class="ql-link"></button>
        <button class="ql-image"></button>
        <button class="ql-strike"></button>
        <button class="ql-clean"></button>
        <button mat-icon-button type="button" style="width: 28px; height: 28px; padding-top: 4px;">
            <mat-icon style="font-size: 18px;">palette</mat-icon>
            <input
            type="color"
            [(ngModel)]="selectedColor"
            (change)="applyColor($event)"
            style="
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                height: 100%;
                opacity: 0;
                cursor: pointer;
            "
            />
        </button>
        <button mat-icon-button type="button" style="width: 28px; height: 28px; padding: 0;">
            <mat-icon>highlight</mat-icon>
            <input
                type="color"
                [(ngModel)]="selectedHighlight"
                (change)="applyHighlight($event)"
                style="
                    position: absolute;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    opacity: 0;
                    cursor: pointer;
                "
            />
        </button>
        <button type="button" style="width: 28px; height: 28px; padding: 2px;" (click)="undo()" mat-icon-button>
            <mat-icon>undo</mat-icon>
        </button>
        <button type="button" style="width: 28px; height: 28px; padding: 2px;" (click)="redo()" mat-icon-button>
            <mat-icon>redo</mat-icon>
        </button>
        <button type="button" style="width: 28px; height: 28px; padding: 0;" (click)="save()">
            <mat-icon>save</mat-icon>
        </button>
        <button mat-icon-button type="button" style="width: 28px; height: 28px; padding: 0;" (click)="addWordMapping()">
            <mat-icon>map</mat-icon>
        </button>
        <button mat-icon-button type="button" style="width: 28px; height: 28px; padding: 0;" (click)="exportToGoogleDocs()" title="Export to Google Docs">
            <mat-icon>description</mat-icon>
        </button>
        <button mat-icon-button type="button" style="width: 28px; height: 28px; padding: 0;" (click)="exportToEPUB()" title="Export to Google Docs">
            <mat-icon>menu_book</mat-icon>
        </button>
        <button type="button" style="width: 28px; height: 28px; padding: 0;" (click)="toggleFindAndReplace()">
            <mat-icon>find_replace</mat-icon>
        </button>
        <button type="button" style="width: 28px; height: 28px; padding: 0;" (click)="toggleDarkMode()" mat-icon-button [title]="darkMode ? 'Light Mode' : 'Dark Mode'">
            <mat-icon>{{ darkMode ? 'light_mode' : 'dark_mode' }}</mat-icon>
        </button>
        <button type="button" style="width: 28px; height: 28px; padding: 0;" (click)="toggleFocusMode()" [ngStyle]="focusMode ? {display: 'none'} : {}">
            <mat-icon>fullscreen</mat-icon>
        </button>
        <span class="find-replace-group" [ngStyle]="isFindAndReplaceActive ? {display: 'block'} : {display: 'none'}" style="text-align: center; margin-top: 2.5rem;">
          <div class="find-replace-container" style="display: inline-block; text-align: center;">
            <mat-form-field appearance="outline" class="dense">
              <input matInput placeholder="Find..." #findInput>
              <button mat-icon-button matSuffix type="button" (click)="findText(findInput.value)" color="primary" title="Find">
                <mat-icon>search</mat-icon>
              </button>
            </mat-form-field>
            <mat-form-field appearance="outline" class="dense">
              <input matInput placeholder="Replace..." #replaceInput>
              <button mat-icon-button matSuffix type="button" (click)="replaceText(findInput.value, replaceInput.value)" color="accent" title="Replace">
                <mat-icon>find_replace</mat-icon>
              </button>
            </mat-form-field>
          </div>
        </span>
    </span>
    <span class="open-options" [ngStyle]="!focusMode ? {visibility: 'hidden'} : {}">
        <button (click)="openOptions()">
            <mat-icon>more_vert</mat-icon>
        </button>
    </span>
</div>

<div class="chapter-name">
    {{ chapterName }}
</div>
  
<div [class.focus-mode]="focusMode" class="editor-container">
<quill-editor
    class="editor"
    [(ngModel)]="content"
    [modules]="modules"
    (onContentChanged)="onContentChanged()">
</quill-editor>
</div>
  
<div class="word-count">
{{ wordCount }} words â€¢ {{ charCount }} characters
</div>